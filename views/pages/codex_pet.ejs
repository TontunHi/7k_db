<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('../partials/head') %>
        <link rel="stylesheet" href="/css/pages/codex.css">
</head>

<body>

    <%- include('../partials/navbar') %>

        <div class="codex-layout">

            <aside class="sidebar-panel">
                <div class="sidebar-header">
                    <div class="sidebar-title">
                        <i class="bi bi-paw-fill text-warning"></i> Pet Groups
                    </div>
                </div>
                <div class="group-list">
                    <% if(groups && groups.length> 0) { %>
                        <% groups.forEach(grp=> { %>
                            <a href="/codex/pet?cat_id=<%= activeCatId %>&group_id=<%= grp.id %>"
                                class="group-item <%= activeGroupId == grp.id ? 'active' : '' %>">
                                <span>
                                    <%= grp.name %>
                                </span>
                                <% if(activeGroupId==grp.id) { %> <i class="bi bi-chevron-right small"></i>
                                    <% } %>
                            </a>
                            <% }) %>
                                <% } else { %>
                                    <div class="text-center p-4 text-muted small">No Groups</div>
                                    <% } %>
                </div>
            </aside>

            <main class="content-panel">
                <div class="top-tabs-bar">
                    <span class="text-white small fw-bold me-2 text-uppercase opacity-50"
                        style="letter-spacing: 1px;">Categories:</span>
                    <% if(categories && categories.length> 0) { %>
                        <% categories.forEach(cat=> { %>
                            <a href="/codex/pet?cat_id=<%= cat.id %>"
                                class="cat-tab <%= activeCatId == cat.id ? 'active' : '' %>">
                                <%= cat.name %>
                            </a>
                            <% }) %>
                                <% } %>
                </div>

                <div class="hero-grid-container">
                    <% const currentGroup=groups.find(g=> g.id == activeGroupId); %>

                        <div class="mb-4">
                            <h1 class="section-title">
                                <%= currentGroup ? currentGroup.name : 'Select a Group' %>
                            </h1>
                            <p class="section-subtitle">
                                <%= currentGroup ? `Collection of pets from ${currentGroup.name}.`
                                    : 'Select a pet group to view collection.' %>
                            </p>
                        </div>

                        <div class="row g-4">
                            <% if(pets.length===0) { %>
                                <div class="col-12">
                                    <div class="text-center py-5 text-muted"
                                        style="border: 2px dashed #222; border-radius: 12px;">
                                        <i class="bi bi-box-seam display-4 mb-3 opacity-25"></i>
                                        <h5>No pets found here</h5>
                                    </div>
                                </div>
                                <% } %>

                                    <% pets.forEach(pet=> { %>
                                        <div class="col-6 col-sm-4 col-md-3 col-xl-2">
                                            <div class="hero-card">
                                                <div class="hero-img-wrapper">
                                                    <img src="/images/pets/<%= pet.image_name %>" class="hero-img"
                                                        loading="lazy" alt="<%= pet.name %>">
                                                </div>
                                                <div class="hero-info">
                                                    <h3 class="hero-name">
                                                        <%= pet.name %>
                                                    </h3>
                                                </div>
                                            </div>
                                        </div>
                                        <% }) %>
                        </div>
                </div>
            </main>
        </div>

        <%- include('../partials/footer') %>
</body>

</html>